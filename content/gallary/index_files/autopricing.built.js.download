!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.autopricing=e():t.autopricing=e()}(window,(function(){return function(t){var e={};function r(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(i,s,function(e){return t[e]}.bind(null,s));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=21)}([function(t,e,r){"use strict";var i=r(15);t.exports=function(t){return function(){if(i&&"object"==typeof window.console&&"function"==typeof console[t])return console[t].apply(console,Array.prototype.slice.call(arguments,0))}}},function(t,e,r){"use strict";const i=r(36),s="[ @marcom/pricing ]",n=Object.keys(i);let a=!1;for(var o=0,c=n.length;o<c;o++){const e=n[o],r="function"==typeof i[e]?i[e]:null;r&&(t.exports[e]=function(){const t=Array.prototype.slice.call(arguments);a||"string"!=typeof t[0]||(t[0]=`${s} ${t[0]}`),"group"!==e&&"groupCollapsed"!==e||(a=!0),"groupEnd"===e&&(a=!1),r.apply(i,t)})}t.exports.enabled=i.enabled},function(t,e,r){"use strict";const i=r(25);t.exports=function(t){return new Promise((function(e){"undefined"!=typeof window&&window.document?i((function(){let r={};const i=document.querySelector(`link[rel="ac:${t}-endpoint"]`);i&&(r.endpoint=(i.getAttribute("href")||"").trim());document.querySelectorAll(`meta[name="ac:${t}-alias"]`).forEach(t=>{const[e,i]=(t.getAttribute("content")||"").split("=");e&&i&&(r.aliases=r.aliases||{},r.aliases[e]=i)});const s=document.querySelector('meta[name="ac:pricing-dummy"]');s&&(r.dummyPrices="true"===(s.getAttribute("content")||"").trim()),e(r)})):e({})}))}},function(t,e,r){"use strict";t.exports=class{constructor(t=null,e={}){this.error=t,this.products=e}}},function(t,e,r){"use strict";const i=r(1);t.exports=class extends Error{constructor(t){super(t||"Failed to fetch product price: The API service responded with an unexpected data format."),this.name="InvalidDataError"}showHint(){i.warn(this.message)}}},function(t,e,r){"use strict";const i=r(2),s=r(3),n=r(9);t.exports=function(t=[],e={}){if(!t.length){const t=new s;return Promise.resolve(t)}return i("edupricing").then(r=>{const i=Object.assign({},r,e);return new n(t,i).send()})}},function(t,e,r){"use strict";function i(){this._events={}}var s=i.prototype;s.on=function(t,e){this._events[t]=this._events[t]||[],this._events[t].unshift(e)},s.once=function(t,e){var r=this;this.on(t,(function i(s){r.off(t,i),void 0!==s?e(s):e()}))},s.off=function(t,e){if(this.has(t)){if(1===arguments.length)return this._events[t]=null,void delete this._events[t];var r=this._events[t].indexOf(e);-1!==r&&this._events[t].splice(r,1)}},s.trigger=function(t,e){if(this.has(t))for(var r=this._events[t].length-1;r>=0;r--)void 0!==e?this._events[t][r](e):this._events[t][r]()},s.has=function(t){return t in this._events!=!1&&0!==this._events[t].length},s.destroy=function(){for(var t in this._events)this._events[t]=null;this._events=null},t.exports=i},function(t,e,r){"use strict";t.exports={SharedInstance:r(32)}},function(t,e){t.exports={majorVersionNumber:"3.x"}},function(t,e,r){"use strict";const i=r(35),s=r(12),n=r(16);t.exports=class extends n{constructor(t,e){super(t,e),this.identifierParam="parts"}createDummyItem(t){return i(t,"unauthorized")}formatResponseItem(t,e){let r=null;return this.options.dummyPrices&&"UNKNOWN"===e.type&&(e=i(t,"unknown"),this.itemsWithDummyPrice.push(t)),r=new s(e),r.price&&999999===r.price.value&&this.itemsWithDummyPrice.push(t),r}getItemsFromResponse(t){return t.items}}},function(t,e,r){"use strict";t.exports={mockPrices:{unauthorized:777777,unknown:888888}}},function(t,e,r){"use strict";t.exports=function(t,e){const r=t%1==0?0:2;return t>9999?t.toLocaleString(e,{minimumFractionDigits:r,maximumFractionDigits:r}):t.toFixed(r)}},function(t,e,r){"use strict";const i=r(13),s=r(14),n=r(4),a=t=>({id:t.isString,name:t.isString,type:t=>["WUIP","PART"].includes(t),price:t.isObject,"price.value":t.isNumber,"price.display":t.isObject,"price.display.disclaimer":t.isOptionalString,"price.display.legal":t.isOptionalString,"price.display.actual":t.isString,"price.display.monthlyFrom":t.isOptionalString,"price.display.smart":t.isString,"price.display.from":(t,e)=>"WUIP"===e.type?"string"==typeof t:void 0===t}),o=(t="id")=>e=>void 0===e||s(e,e=>({[t]:e.isString,productName:e.isString,credit:e.isObject,"credit.value":e.isNumber,"credit.display":e.isObject,"credit.display.actual":e.isString,"credit.display.smart":e.isString,"credit.display.upto":e.isString,priceWithCreditApplied:e.isObject,"priceWithCreditApplied.value":e.isNumber,"priceWithCreditApplied.display.actual":e.isString,"priceWithCreditApplied.display.disclaimer":e.isOptionalString,"priceWithCreditApplied.display.from":e.isString,"priceWithCreditApplied.display.monthlyFrom":e.isOptionalString,"priceWithCreditApplied.display.smart":e.isString})),c=(t="id")=>e=>({...a(e),tradeIn:o(t)});class u{constructor(t){if(!u.validate(t))throw new n("Could not create Product, because the given JSON contains invalid data.");i(this,t)}get isWUIP(){return"WUIP"===this.type}get isPart(){return"PART"===this.type}static validate(t){if(!t.tradeIn)return s(t,c);if(t.tradeIn.slug)return s(t,c("slug"));if(t.tradeIn.id)return s(t,c("id"));throw new Error("Cannot validate Product data.")}}t.exports=u},function(t,e,r){"use strict";t.exports=function(t,e){Object.entries(e).forEach(([e,r])=>{t[e]||Object.defineProperty(t,e,{enumerable:!0,value:"object"==typeof r?Object.freeze(JSON.parse(JSON.stringify(r))):r})})}},function(t,e,r){"use strict";const i={isString:t=>"string"==typeof t,isOptionalString:t=>!t||"string"==typeof t,isNumber:t=>"number"==typeof t,isObject:t=>"[object Object]"===Object.prototype.toString.call(t)};function s(t,e){return e.split(".").reduce((t,e)=>t&&t[e],t)}t.exports=function(t,e){"function"==typeof e&&(e=e(i));const r=Object.entries(e);for(var n=0,a=r.length;n<a;n++){const[e,i]=r[n],a=e.indexOf(".")>-1?s(t,e):t[e];if(!0!==i.call(t,a,t))return!1}return!0}},function(t,e,r){"use strict";var i=!1,s=window||self;try{i=!!s.localStorage.getItem("f7c9180f-5c45-47b4-8de4-428015f096c0")}catch(t){}t.exports=i},function(t,e,r){"use strict";const i=r(55),s=r(56),n=r(1),a=r(58),o=r(17),c=r(3),u={endpoint:null,aliases:null,timeout:5,dummyPrices:!1};t.exports=class{constructor(t=[],e={}){this.ids=Array.isArray(t)?t:[t],this._originalIDs=[...this.ids],this.identifierToAliasMap={},this.options=this._processOptions(e),this.itemsWithDummyPrice=[],this.identifierParam={}}formatResponseItem(){throw new Error("not implemented")}getItemsFromResponse(){throw new Error("not implemented")}createDummyItem(){throw new Error("not implemented")}send(){return this._maybeForceError().then(()=>this._request()).then(t=>this._processResponse(t)).then(t=>this._createProductObjects(t)).catch(t=>this._handleError(t))}_createProductObjects(t){let e={};return Object.entries(t).forEach(([t,r])=>{let i=null;const s=this.identifierToAliasMap[t]||this.identifierToAliasMap["slug:"+t]||[t];try{i=this.formatResponseItem(t,r)}catch(t){if("InvalidDataError"!==t.name)throw t}s.forEach(t=>{e[t]=i})}),Object.defineProperty(e,"aliases",{value:this.options.aliases}),n.group("%cResults from Apple Online Store","background-color:#27a33f;color:white;padding:2px 5px"),n.log(e),n.groupEnd(),n.enabled&&this.itemsWithDummyPrice.length&&(n.group("Dummy Prices"),n.warn("Using dummy prices for the following product identifiers: "+this.itemsWithDummyPrice.join(", ")),n.info("$777,777 — The API service may require authentication and/or authorization. \n$888,888 — The product identifer is currently unknown to the API service. \n$999,999 — The product identifier is known to the API service, but the price has yet to be set. \n"),n.groupEnd()),new c(null,e)}_handleError(t){let e={};this.ids.forEach(t=>e[t]=null);let r=new c(t,e);if(!t)return r;if(!Object.keys(o).some(e=>t.name===e))throw t;if("UnexpectedError"===t.name&&this.options.dummyPrices){let e={};this._originalIDs.forEach(t=>{e[t]=this.createDummyItem(t),this.itemsWithDummyPrice.push(t)}),r=new c(t,e)}return t&&"function"==typeof t.showHint&&t.showHint(r.products),r}_maybeForceError(){return new Promise((t,e)=>{if(this.options.dummyPrices&&"undefined"!=typeof window&&window.location.search.indexOf("39f4f1f5-c4a1-4a7c-ab30-085335a11146")>-1){const t=i("39f4f1f5-c4a1-4a7c-ab30-085335a11146",null);e(t&&o[t]&&new o[t])}t()})}_processOptions(t){if(!(t=Object.assign({},u,t)).endpoint)throw new o.ConfigurationError({type:"endpoint"});const e=t.aliases?Object.entries(t.aliases):[];return e.length&&(this.identifierToAliasMap=e.reduce((t,[e,r])=>(t[r]=t[r]||[],t[r].push(e),t),{}),this.ids=this.ids.map(e=>t.aliases[e]||e)),t}_processResponse(t){let e=null,r=null;switch(parseInt(t.getResponseHeader("x-rewrite-status"),10)||t.status){case 404:throw new o.ServiceNotFoundError;case 503:throw new o.ServiceUnavailableError;case 400:throw new o.UnexpectedError;case 200:if(r=a(t.responseText),null!==r&&(e=this.getItemsFromResponse(r),e))return e;default:throw new o.InvalidDataError}}_request(){return new Promise((t,e)=>{const r=new XMLHttpRequest;r.withCredentials=!0,r.onloadend=t.bind(this,r),r.ontimeout=e.bind(this,new o.TimeoutError(this.options.timeout)),r.onerror=e.bind(this,new o.UnexpectedError),r.open("POST",s(this.options.endpoint,this.identifierParam,this.ids),!0),r.timeout=1e3*(this.options.timeout||0),r.send()})}}},function(t,e,r){"use strict";t.exports={ConfigurationError:r(59),ServiceNotFoundError:r(60),ServiceUnavailableError:r(61),TimeoutError:r(62),InvalidDataError:r(4),UnexpectedError:r(63)}},function(t,e,r){"use strict";const i=r(2),s=r(3),n=r(9);t.exports=function(t=[],e={}){if(!t.length){const t=new s;return Promise.resolve(t)}return i("pricing").then(r=>{const i=Object.assign({},r,e);return new n(t,i).send()})}},function(t,e,r){"use strict";const i=r(2),s=r(3),n=r(64);t.exports=function(t=[],e={}){if(!t.length){const t=new s;return Promise.resolve(t)}return i("tradein").then(r=>{const i=Object.assign({},r,e);return new n(t,i).send()})}},function(t,e,r){"use strict";const i=r(13),s=r(14),n=r(4),a=t=>({productName:t.isString,productNameWithMaxPrice:t.isString,credit:t.isObject,"credit.value":t.isNumber,"credit.display":t.isObject,"credit.display.actual":t.isString,"credit.display.smart":t.isString,"credit.display.upto":t.isString}),o=(t="id")=>e=>({...a(e),[t]:e.isString});class c{constructor(t){if(!c.validate(t))throw new n("Could not create TradeIn, because the given JSON contains invalid data.");i(this,t)}static validate(t){if(t.slug)return s(t,o("slug"));if(t.id)return s(t,o("id"));throw new Error("Cannot validate TradeIn data.")}}t.exports=c},function(t,e,r){t.exports=r(22)},function(t,e,r){const{applyPrices:i}=r(23);function s(t){return e=>{const r=Boolean(e)?t+"Error":t+"Complete",i=new CustomEvent(r,{detail:{error:e}});window.dispatchEvent(i)}}i.loadEduPricingFromHTML().then(t=>s("edupricing")(t)),i.loadPricingFromHTML().then(t=>s("pricing")(t)),i.loadTradeInFromHTML().then(t=>s("tradein")(t))},function(t,e,r){"use strict";t.exports=Object.assign({applyPrices:r(24),fetchEduProducts:r(5),fetchProducts:r(18),fetchTradeIns:r(19),Product:r(12),TradeIn:r(20)},r(17))},function(t,e,r){"use strict";const i=r(5),s=r(18),n=r(19),a=r(2),o="Elements",c="Hide",u="HideAll",h="MultipleElementsToHide",l="Product",d="SingleElementsToHide",p="edupricing",m="pricing",f="tradein";t.exports=new class{getProductID(t,e){let r=[];return e.forEach(e=>{r.push(e.dataset[`${t}${l}`])}),[...new Set(r)]}setElements(t){const e=[...document.querySelectorAll(`[data-${t}-product]`)];let r=Array.prototype.slice.call(e).filter(t=>"SCRIPT"!==t.tagName);this[`${t}${o}`]=r}getSingleElementToHide(t){const e=[...document.querySelectorAll(`[data-${t}-hide]`)];this[`${t}${d}`]=e}getMultipleElementsToHide(t){const e=[...document.querySelectorAll(`[data-${t}-hide-all]`)];this[`${t}${h}`]=e}fetchProductInfo(t,e={}){let r,c;const u=this.getProductID(t,this[`${t}${o}`]);return a(t).then(a=>{const o=Object.assign({},a,e);return t===m?c=s(u,e):t===p?c=i(u,e):t===f?c=n(u,e):r="API not supported",r||c.then(t=>({response:t,options:o}))})}getValueFromPath(t,e){return t.replace(/\s+/g,"").replace(/\$\{([\w\d.]+)\}/g,(t,r)=>r.split(".").reduce((t,e)=>t&&t[e]?t[e]:"",e))}handleError(t,e,r){this.getSingleElementToHide(r),this[`${r}${d}`].forEach(i=>{const s=i.dataset[`${r}${c}`],n=e.products[s],a=t.dataset[`${r}${l}`],o=n&&"productName"in n&&"UNKNOWN"===n.productName,u=n&&"type"in n&&"UNKNOWN"===n.type;(e.error||!n||o||u)&&s===a&&(n&&!o&&!u||t.innerText||(i.style.display="none"))}),this.getMultipleElementsToHide(r),this[`${r}${h}`].forEach(t=>{const i=t.dataset[`${r}${u}`].split(",").every(t=>{const r=e.products[t]&&"productName"in e.products[t]&&"UNKNOWN"===e.products[t].productName,i=e.products[t]&&"type"in e.products[t]&&"UNKNOWN"===e.products[t].type;return!e.products[t]||r||i});(e.error||i)&&(t.style.display="none")}),t.innerText||(t.style.display="none")}fetchProductDataFromHTML(t,e){return new Promise(r=>{this.setElements(t),this.fetchProductInfo(t,e).then(({response:e,options:i})=>{this[`${t}${o}`].forEach(r=>{let s;if(!e.error||i.dummyPrices){const i=r.dataset[`${t}${l}`];let n=e.products[i];const a=(r.dataset.productTemplate||"").replace(/\$\{\s*([\w\d.]+)\s*\}/g,t=>{const e=this.getValueFromPath(t,n);return e||(s=!0),e});n&&!s?(r.textContent=a,r.dataset.pricingLoaded="",r.parentElement.classList.add("has-dynamic-content")):this.handleError(r,e,t)}else this.handleError(r,e,t)}),r(e.error)}).catch(t=>{throw t})})}loadEduPricingFromHTML(t){return this.fetchProductDataFromHTML(p,t)}loadPricingFromHTML(t){return this.fetchProductDataFromHTML(m,t)}loadTradeInFromHTML(t){return this.fetchProductDataFromHTML(f,t)}}},function(t,e,r){"use strict";var i=r(26);t.exports=i.requestAnimationFrame("update")},function(t,e,r){"use strict";var i=r(27),s=function(){this.events={}},n=s.prototype;n.requestAnimationFrame=function(t){return this.events[t]||(this.events[t]=new i(t)),this.events[t].requestAnimationFrame},n.cancelAnimationFrame=function(t){return this.events[t]||(this.events[t]=new i(t)),this.events[t].cancelAnimationFrame},t.exports=new s},function(t,e,r){"use strict";var i=r(28),s=function(t){this.phase=t,this.rafEmitter=new i,this._cachePhaseIndex(),this.requestAnimationFrame=this.requestAnimationFrame.bind(this),this.cancelAnimationFrame=this.cancelAnimationFrame.bind(this),this._onBeforeRAFExecutorStart=this._onBeforeRAFExecutorStart.bind(this),this._onBeforeRAFExecutorPhase=this._onBeforeRAFExecutorPhase.bind(this),this._onAfterRAFExecutorPhase=this._onAfterRAFExecutorPhase.bind(this),this.rafEmitter.on(this.phase,this._onRAFExecuted.bind(this)),this.rafEmitter.executor.eventEmitter.on("before:start",this._onBeforeRAFExecutorStart),this.rafEmitter.executor.eventEmitter.on("before:"+this.phase,this._onBeforeRAFExecutorPhase),this.rafEmitter.executor.eventEmitter.on("after:"+this.phase,this._onAfterRAFExecutorPhase),this._frameCallbacks=[],this._currentFrameCallbacks=[],this._nextFrameCallbacks=[],this._phaseActive=!1,this._currentFrameID=-1,this._cancelFrameIdx=-1,this._frameCallbackLength=0,this._currentFrameCallbacksLength=0,this._nextFrameCallbacksLength=0,this._frameCallbackIteration=0},n=s.prototype;n.requestAnimationFrame=function(t,e){return!0===e&&this.rafEmitter.executor.phaseIndex>0&&this.rafEmitter.executor.phaseIndex<=this.phaseIndex?this._phaseActive?(this._currentFrameID=this.rafEmitter.executor.subscribeImmediate(this.rafEmitter,!0),this._frameCallbacks.push(this._currentFrameID,t),this._frameCallbackLength+=2):(this._currentFrameID=this.rafEmitter.executor.subscribeImmediate(this.rafEmitter,!1),this._currentFrameCallbacks.push(this._currentFrameID,t),this._currentFrameCallbacksLength+=2):(this._currentFrameID=this.rafEmitter.run(),this._nextFrameCallbacks.push(this._currentFrameID,t),this._nextFrameCallbacksLength+=2),this._currentFrameID},n.cancelAnimationFrame=function(t){this._cancelFrameIdx=this._nextFrameCallbacks.indexOf(t),this._cancelFrameIdx>-1?this._cancelNextAnimationFrame():(this._cancelFrameIdx=this._currentFrameCallbacks.indexOf(t),this._cancelFrameIdx>-1?this._cancelCurrentAnimationFrame():(this._cancelFrameIdx=this._frameCallbacks.indexOf(t),this._cancelFrameIdx>-1&&this._cancelRunningAnimationFrame()))},n._onRAFExecuted=function(t){for(this._frameCallbackIteration=0;this._frameCallbackIteration<this._frameCallbackLength;this._frameCallbackIteration+=2)this._frameCallbacks[this._frameCallbackIteration+1](t.time,t);this._frameCallbacks.length=0,this._frameCallbackLength=0},n._onBeforeRAFExecutorStart=function(){Array.prototype.push.apply(this._currentFrameCallbacks,this._nextFrameCallbacks.splice(0,this._nextFrameCallbacksLength)),this._currentFrameCallbacksLength=this._nextFrameCallbacksLength,this._nextFrameCallbacks.length=0,this._nextFrameCallbacksLength=0},n._onBeforeRAFExecutorPhase=function(){this._phaseActive=!0,Array.prototype.push.apply(this._frameCallbacks,this._currentFrameCallbacks.splice(0,this._currentFrameCallbacksLength)),this._frameCallbackLength=this._currentFrameCallbacksLength,this._currentFrameCallbacks.length=0,this._currentFrameCallbacksLength=0},n._onAfterRAFExecutorPhase=function(){this._phaseActive=!1},n._cachePhaseIndex=function(){this.phaseIndex=this.rafEmitter.executor.phases.indexOf(this.phase)},n._cancelRunningAnimationFrame=function(){this._frameCallbacks.splice(this._cancelFrameIdx,2),this._frameCallbackLength-=2},n._cancelCurrentAnimationFrame=function(){this._currentFrameCallbacks.splice(this._cancelFrameIdx,2),this._currentFrameCallbacksLength-=2},n._cancelNextAnimationFrame=function(){this._nextFrameCallbacks.splice(this._cancelFrameIdx,2),this._nextFrameCallbacksLength-=2,0===this._nextFrameCallbacksLength&&this.rafEmitter.cancel()},t.exports=s},function(t,e,r){"use strict";var i=r(29),s=function(t){i.call(this,t)};(s.prototype=Object.create(i.prototype))._subscribe=function(){return this.executor.subscribe(this,!0)},t.exports=s},function(t,e,r){"use strict";var i,s=r(30).EventEmitterMicro,n=r(31),a=r(34);function o(t){t=t||{},s.call(this),this.id=a.getNewID(),this.executor=t.executor||n,this._reset(),this._willRun=!1,this._didDestroy=!1}(i=o.prototype=Object.create(s.prototype)).run=function(){return this._willRun||(this._willRun=!0),this._subscribe()},i.cancel=function(){this._unsubscribe(),this._willRun&&(this._willRun=!1),this._reset()},i.destroy=function(){var t=this.willRun();return this.cancel(),this.executor=null,s.prototype.destroy.call(this),this._didDestroy=!0,t},i.willRun=function(){return this._willRun},i.isRunning=function(){return this._isRunning},i._subscribe=function(){return this.executor.subscribe(this)},i._unsubscribe=function(){return this.executor.unsubscribe(this)},i._onAnimationFrameStart=function(t){this._isRunning=!0,this._willRun=!1,this._didEmitFrameData||(this._didEmitFrameData=!0,this.trigger("start",t))},i._onAnimationFrameEnd=function(t){this._willRun||(this.trigger("stop",t),this._reset())},i._reset=function(){this._didEmitFrameData=!1,this._isRunning=!1},t.exports=o},function(t,e,r){"use strict";t.exports={EventEmitterMicro:r(6)}},function(t,e,r){"use strict";var i=r(7).SharedInstance,s=r(8).majorVersionNumber,n=r(33);t.exports=i.share("@marcom/ac-raf-emitter/sharedRAFExecutorInstance",s,n)},function(t,e,r){"use strict";var i,s=window,n=s.AC,a=(i={},{get:function(t,e){var r=null;return i[t]&&i[t][e]&&(r=i[t][e]),r},set:function(t,e,r){return i[t]||(i[t]={}),i[t][e]="function"==typeof r?new r:r,i[t][e]},share:function(t,e,r){var i=this.get(t,e);return i||(i=this.set(t,e,r)),i},remove:function(t,e){var r=typeof e;if("string"!==r&&"number"!==r)i[t]&&(i[t]=null);else{if(!i[t]||!i[t][e])return;i[t][e]=null}}});n||(n=s.AC={}),n.SharedInstance||(n.SharedInstance=a),t.exports=n.SharedInstance},function(t,e,r){"use strict";var i,s=r(6);function n(t){t=t||{},this._reset(),this.updatePhases(),this.eventEmitter=new s,this._willRun=!1,this._totalSubscribeCount=-1,this._requestAnimationFrame=window.requestAnimationFrame,this._cancelAnimationFrame=window.cancelAnimationFrame,this._boundOnAnimationFrame=this._onAnimationFrame.bind(this),this._boundOnExternalAnimationFrame=this._onExternalAnimationFrame.bind(this)}(i=n.prototype).frameRequestedPhase="requested",i.startPhase="start",i.runPhases=["update","external","draw"],i.endPhase="end",i.disabledPhase="disabled",i.beforePhaseEventPrefix="before:",i.afterPhaseEventPrefix="after:",i.subscribe=function(t,e){return this._totalSubscribeCount++,this._nextFrameSubscribers[t.id]||(e?this._nextFrameSubscribersOrder.unshift(t.id):this._nextFrameSubscribersOrder.push(t.id),this._nextFrameSubscribers[t.id]=t,this._nextFrameSubscriberArrayLength++,this._nextFrameSubscriberCount++,this._run()),this._totalSubscribeCount},i.subscribeImmediate=function(t,e){return this._totalSubscribeCount++,this._subscribers[t.id]||(e?this._subscribersOrder.splice(this._currentSubscriberIndex+1,0,t.id):this._subscribersOrder.unshift(t.id),this._subscribers[t.id]=t,this._subscriberArrayLength++,this._subscriberCount++),this._totalSubscribeCount},i.unsubscribe=function(t){return!!this._nextFrameSubscribers[t.id]&&(this._nextFrameSubscribers[t.id]=null,this._nextFrameSubscriberCount--,0===this._nextFrameSubscriberCount&&this._cancel(),!0)},i.getSubscribeID=function(){return this._totalSubscribeCount+=1},i.destroy=function(){var t=this._cancel();return this.eventEmitter.destroy(),this.eventEmitter=null,this.phases=null,this._subscribers=null,this._subscribersOrder=null,this._nextFrameSubscribers=null,this._nextFrameSubscribersOrder=null,this._rafData=null,this._boundOnAnimationFrame=null,this._onExternalAnimationFrame=null,t},i.useExternalAnimationFrame=function(t){if("boolean"==typeof t){var e=this._isUsingExternalAnimationFrame;return t&&this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),!this._willRun||t||this._animationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this._isUsingExternalAnimationFrame=t,t?this._boundOnExternalAnimationFrame:e||!1}},i.updatePhases=function(){this.phases||(this.phases=[]),this.phases.length=0,this.phases.push(this.frameRequestedPhase),this.phases.push(this.startPhase),Array.prototype.push.apply(this.phases,this.runPhases),this.phases.push(this.endPhase),this._runPhasesLength=this.runPhases.length,this._phasesLength=this.phases.length},i._run=function(){if(!this._willRun)return this._willRun=!0,0===this.lastFrameTime&&(this.lastFrameTime=performance.now()),this._animationFrameActive=!0,this._isUsingExternalAnimationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this.phase===this.disabledPhase&&(this.phaseIndex=0,this.phase=this.phases[this.phaseIndex]),!0},i._cancel=function(){var t=!1;return this._animationFrameActive&&(this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),this._animationFrameActive=!1,this._willRun=!1,t=!0),this._isRunning||this._reset(),t},i._onAnimationFrame=function(t){for(this._subscribers=this._nextFrameSubscribers,this._subscribersOrder=this._nextFrameSubscribersOrder,this._subscriberArrayLength=this._nextFrameSubscriberArrayLength,this._subscriberCount=this._nextFrameSubscriberCount,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this.phaseIndex=0,this.phase=this.phases[this.phaseIndex],this._isRunning=!0,this._willRun=!1,this._didRequestNextRAF=!1,this._rafData.delta=t-this.lastFrameTime,this.lastFrameTime=t,this._rafData.fps=0,this._rafData.delta>=1e3&&(this._rafData.delta=0),0!==this._rafData.delta&&(this._rafData.fps=1e3/this._rafData.delta),this._rafData.time=t,this._rafData.naturalFps=this._rafData.fps,this._rafData.timeNow=Date.now(),this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&!1===this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._onAnimationFrameStart(this._rafData);for(this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase),this._runPhaseIndex=0;this._runPhaseIndex<this._runPhasesLength;this._runPhaseIndex++){for(this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&!1===this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]].trigger(this.phase,this._rafData);this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase)}for(this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&!1===this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._onAnimationFrameEnd(this._rafData);this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase),this._willRun?(this.phaseIndex=0,this.phaseIndex=this.phases[this.phaseIndex]):this._reset()},i._onExternalAnimationFrame=function(t){this._isUsingExternalAnimationFrame&&this._onAnimationFrame(t)},i._reset=function(){this._rafData||(this._rafData={}),this._rafData.time=0,this._rafData.delta=0,this._rafData.fps=0,this._rafData.naturalFps=0,this._rafData.timeNow=0,this._subscribers={},this._subscribersOrder=[],this._currentSubscriberIndex=-1,this._subscriberArrayLength=0,this._subscriberCount=0,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this._didEmitFrameData=!1,this._animationFrame=null,this._animationFrameActive=!1,this._isRunning=!1,this._shouldReset=!1,this.lastFrameTime=0,this._runPhaseIndex=-1,this.phaseIndex=-1,this.phase=this.disabledPhase},t.exports=n},function(t,e,r){"use strict";var i=r(7).SharedInstance,s=r(8).majorVersionNumber,n=function(){this._currentID=0};n.prototype.getNewID=function(){return this._currentID++,"raf:"+this._currentID},t.exports=i.share("@marcom/ac-raf-emitter/sharedRAFEmitterIDGeneratorInstance",s,n)},function(t,e,r){"use strict";const{mockPrices:i}=r(10),s=r(11);t.exports=function(t,e,r="en"){const n=parseFloat(i[e]||e||0),a=s(n,r);return{id:t,name:"",type:"WUIP",price:{value:n,display:{actual:"$"+Number(n).toLocaleString(r,{minimumFractionDigits:2}),smart:"$"+a,from:"From $"+a}}}}},function(t,e,r){"use strict";t.exports={assert:r(37),count:r(38),countReset:r(39),dir:r(40),dirxml:r(41),enabled:r(15),error:r(42),group:r(43),groupCollapsed:r(44),groupEnd:r(45),info:r(46),log:r(47),profile:r(48),profileEnd:r(49),table:r(50),time:r(51),timeEnd:r(52),trace:r(53),warn:r(54)}},function(t,e,r){"use strict";t.exports=r(0)("assert")},function(t,e,r){"use strict";t.exports=r(0)("count")},function(t,e,r){"use strict";t.exports=r(0)("countReset")},function(t,e,r){"use strict";t.exports=r(0)("dir")},function(t,e,r){"use strict";t.exports=r(0)("dirxml")},function(t,e,r){"use strict";t.exports=r(0)("error")},function(t,e,r){"use strict";t.exports=r(0)("group")},function(t,e,r){"use strict";t.exports=r(0)("groupCollapsed")},function(t,e,r){"use strict";t.exports=r(0)("groupEnd")},function(t,e,r){"use strict";t.exports=r(0)("info")},function(t,e,r){"use strict";t.exports=r(0)("log")},function(t,e,r){"use strict";t.exports=r(0)("profile")},function(t,e,r){"use strict";t.exports=r(0)("profileEnd")},function(t,e,r){"use strict";t.exports=r(0)("table")},function(t,e,r){"use strict";t.exports=r(0)("time")},function(t,e,r){"use strict";t.exports=r(0)("timeEnd")},function(t,e,r){"use strict";t.exports=r(0)("trace")},function(t,e,r){"use strict";t.exports=r(0)("warn")},function(t,e,r){"use strict";var i={};t.exports=function(t,e,r){if(t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),r||!i.hasOwnProperty(t)){var s=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(location.search),n=null===s?e:decodeURIComponent(s[1].replace(/\+/g," "));"true"!==n&&"false"!==n||(n="true"===n),isNaN(parseFloat(n))||(n=parseFloat(n)),i[t]=n}return i[t]}},function(t,e,r){"use strict";const i=r(57),s=/\?(.+)/,n=/(#.*)/;t.exports=function(t,e,r=[]){const a=!Array.isArray(r),o=[],c=[],u=t=>{t.match("^slug:")?c.push((t=>t.split(":")[1])(t)):o.push(t)};if(a)u(r);else for(const t of r)u(t);let h=((t=t.replace(n,"")).match(s)||[])[1],l=t;if(r.length){const t=((t,e,r)=>{const i=!t.length&&e.length,s=t.length;return"parts"===r?r:i?r.slugs:s?r.ids:""})(o,c,e),r=`${i(o)}${((t,e)=>{const r=t.length&&e.length,s=!t.length&&e.length;return r?"&slugs="+i(e):s?i(e):""})(o,c)}`;l+=h?"&":"?",l=l.concat(`${t}=${r}`)}return l}},function(t,e,r){"use strict";t.exports=function(t=[]){return Array.isArray(t)||(t=[t]),t.filter(t=>"string"==typeof t).map(t=>encodeURIComponent(String(t).trim())).join(",")}},function(t,e,r){"use strict";t.exports=function(t){try{return JSON.parse(t)}catch(t){return null}}},function(t,e,r){"use strict";const i=r(1);t.exports=class extends Error{constructor(t={}){let e;"endpoint"===t.type&&(e="Failed to fetch product prices: The API service endpoint was not specified."),super(e),this.name="ConfigurationError",this.type=t.type}showHint(){"endpoint"===this.type&&(i.warn(this.message+" This may be expected if this page's locale doesn't have an Apple Online Store."),i.info('If prices are expected for this locale, check that the API service endpoint is specified in HTML with %c<link rel="ac:pricing-endpoint" href="/path/to/endpoint">%c or the "fetchProducts" function\'s "endpoint" option.',"font-family:monospace",""))}}},function(t,e,r){"use strict";const i=r(1);t.exports=class extends Error{constructor(){super("Failed to fetch product prices: The API service responded with a status of 404 (Not Found)."),this.name="ServiceNotFoundError"}showHint(){i.warn(this.message),i.info('Check the "href" value of the %c<link rel="ac:pricing-endpoint">%c tag or the "fetchProducts" function\'s "endpoint" option, if specified.',"font-family:monospace","")}}},function(t,e,r){"use strict";const i=r(1);t.exports=class extends Error{constructor(){super("Failed to fetch product prices: The Apple Online Store is temporarily unavailable."),this.name="ServiceUnavailableError"}showHint(){i.warn(this.message)}}},function(t,e,r){"use strict";const i=r(1);t.exports=class extends Error{constructor(t){super("Failed to fetch product prices: The API service did not respond within "+t+" seconds, so the request was aborted."),this.name="TimeoutError",this.timeoutValue=t}showHint(){i.warn(this.message)}}},function(t,e,r){"use strict";const i=r(1);t.exports=class extends Error{constructor(){super("Failed to fetch prices: An unexpected error occured."),this.name="UnexpectedError"}showHint(){i.warn(this.message),i.info("The API service endpoint may require authentication and/or authorization.")}}},function(t,e,r){"use strict";const i=r(65),s=r(16),n=r(20);t.exports=class extends s{constructor(t,e){super(t,e),this.identifierParam={ids:"ids",slugs:"slugs"}}createDummyItem(t){return i(t,"unauthorized")}formatResponseItem(t,e){let r=null;return this.options.dummyPrices&&"UNKNOWN"===e.productName&&(e=i(t,"unknown"),this.itemsWithDummyPrice.push(t)),r=new n(e),999999===r.credit.value&&this.itemsWithDummyPrice.push(t),r}getItemsFromResponse(t){return t.ids}}},function(t,e,r){"use strict";const{mockPrices:i}=r(10),s=r(11);t.exports=function(t,e,r="en"){const n=parseFloat(i[e]||e||0),a=s(n,r);return{id:t,productName:"",productNameWithMaxPrice:"",credit:{value:n,display:{actual:"$"+Number(n).toLocaleString(r,{minimumFractionDigits:2}),smart:"$"+a,from:"From $"+a,upto:"Up to $"+a}}}}}])}));